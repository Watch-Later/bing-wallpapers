<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<title>ESTIM - Enterprise Solution for Technology and Information Management</title>

<link rel="stylesheet" type="text/css" href="/scrum/zkau/web/eb3e6a52/zul/css/zk.wcs"/>

<script type="text/javascript" src="/scrum/zkau/web/eb3e6a52/js/zk.wpd" charset="UTF-8"></script>
<!-- ZK 7.0.0 2013112611 -->
<link href="bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/x-icon" href="/scrum/assets/img/favicon.ico"/>
<link href="css/fonts.css" rel="stylesheet" type="text/css"/>
<link href="less/index.css.dsp" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="js/cytoscape.min.js">
</script>
<script type="text/javascript" src="js/dagre.min.js">
</script>
<script type="text/javascript" src="js/cytoscape-dagre.js">
</script>
<script type="text/javascript" src="js/cytoscape_graph.js">
</script>
<link href="css/vis.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="js/qrcode.min.js">
</script>
<script src="js/jSignature.min.js" type="text/javascript">
</script>
<script src="js/modernizr.js" type="text/javascript">
</script>
<script src="js/JsBarcode.all.min.js" type="text/javascript">
</script>
</head>
<body>
<div id="tVpW_" class="z-temp"><div id="zk_proc" class="z-loading"><div class="z-loading-indicator"><span class="z-loading-icon"></span>Processing...</div></div></div>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCll9SXOxkyRt42oaQFRcoB-v7dpCS-bo0&libraries=places">
</script>

<script class="z-runonce" type="text/javascript">
zk.appName='ESTIM';zk.pi=1;zkmx(
[0,'tVpW_',{dt:'z_6f40',cu:'/scrum',uu:'/scrum/zkau',ru:'/index.zul'},[
['zul.utl.Style','zk_comp_1',{visible:false,content:'\n        .z-toolbar a, .z-toolbar a:visited, .z-toolbar a:hover {\n        background-color:transparent;\n        border:0 none;\n        }\n        .vista {\n        background:#000000 url("assets/img/bar.png") repeat-x 0 0;\n        color:white;\n        padding-top:7px;\n        }\n        .p-vista .z-panel-children {\n        background-color: #008BB6;\n        border-bottom: 0 none;\n        }\n        \n        div.pac-container{\n        z-index: 999999;\n        } \n    '},[]],
['zul.utl.Script','zk_comp_2',{},[]],
['zul.utl.Style','zk_comp_3',{visible:false,content:'\n        #qrcode {\n        width:50px;\n        height:50px;\n        margin-top:15px;\n        }\n        #text {\n        display: block;\n        width: 50px;\n        }\n    '},[]],
['zul.utl.Style','zk_comp_4',{visible:false,content:'\n        #signature{\n        width: 200px;\n        height: 200px;\n        border: 1px solid black;\n        }\n        .z-modal-mask{\n            position: fixed!important;\n        }\n        \n        .z-notification-content{\n            boreder-radius: 5px;\n            -webkit-border-radius: 5px;\n        }\n        .z-notification-icon.z-icon-times-circle, .z-notification-icon.z-icon-exclamation-circle, .z-notification-icon.z-icon-info-circle{\n            margin-top: -18px;\n            left: 15px;\n        }\n        .z-window{\n             padding: 0px;\n             border: 0px;\n        }\n        .z-window-icon{\n             border: 0px;\n             background: none;\n             color: white;\n        }\n        .z-window-icon:hover{\n             border-radius: 5px;\n        }\n    '},[]],
['zul.utl.Script','zk_comp_5',{},[]],
['zul.utl.Script','zk_comp_6',{},[]],
['zul.utl.Script','zk_comp_7',{content:function(){

        
        
        var _portrait = {'0': true, '180': true}, //default portrait definition
            _initLandscape = jq.innerWidth() > jq.innerHeight(), //initial orientation is landscape or not
            _initDefault = _portrait[window.orientation]; //default orientation
            
        zAu.cmd0.clientInfo = function(dtid){
            zAu._cInfoReg = true;
            var orient = '',
                dpr = 1;
                    
            if (zk.mobile){
                //change default portrait definition because landscape is the default orientation for this device/browser
                if ((_initLandscape && _initDefault) || (!_initLandscape && !_initDefault))
                    _portrait = {'-90': true, '90': true};
                orient = _portrait[window.orientation] ? 'portrait' : 'landscape';                   
            }else{
                    orient = jq.innerWidth() > jq.innerHeight() ? 'landscape' : 'portrait';
            }
                
            if(window.devicePixelRatio)
                dpr = window.devicePixelRatio;
                
            zAu.send(new zk.Event(zk.Desktop.$(dtid), 'onClientInfo', 
                [new Date().getTimezoneOffset(),
                zk.parseInt(screen.width), zk.parseInt(screen.height), screen.colorDepth,
                zk.parseInt(jq.innerWidth()), zk.parseInt(jq.innerHeight()), zk.parseInt(jq.innerX()), zk.parseInt(jq.innerY()), dpr.toFixed(1), orient],
                {implicit:true, rtags: {onClientInfo: 1}}));
            }            
        
    
}},[]],
['zul.wnd.Window','zk_comp_8',{id:'outerIndexWindow',$$onMinimize:false,$$onZIndex:false,$$onMove:false,$onClose:true,$$onOpen:false,$$onMaximize:false,$$onSize:false,width:'100%',height:'100%',style:'position: fixed !important',prolog:'\n    \n    '},[
['zul.layout.Borderlayout','zk_comp_9',{id:'borderlayoutMain',visible:false,width:'100%',style:'background-color:#oooooo'},[
['zul.layout.North','zk_comp_10',{$$onOpen:false,$$onSize:false},[]],
['zul.layout.Center','zk_comp_11',{id:'centerPanel',$$onOpen:false,$$onSize:false,hflex:'true',style:'border-bottom:0',flex:true},[
['zul.box.Vlayout','zk_comp_12',{id:'vlayoutIndex'},[
['zul.wgt.Div','zk_comp_13',{id:'divNavbar1',sclass:'navbar'},[
['zul.utl.Timer','zk_comp_14',{id:'timerNav',prolog:'\n                        \n                        \n                        \n                        \n                        \n                        '},[]],
['zul.wgt.Div','zk_comp_15',{id:'divNavbar',style:'background-repeat: no-repeat; background-color: #ffffff; width:100%; height: 100%; ',prolog:'\n                        \n                        '},[
['zul.box.Hlayout','zk_comp_16',{sclass:'nav-user pull-left',prolog:'\n                            \n                            \n                            \n                            \n                            '},[
['zul.box.Vlayout','zk_comp_17',{id:'pics',$onClick:true},[]]]],
['zul.box.Hlayout','zk_comp_18',{sclass:'nav-user pull-left',prolog:'                             \n                            '},[
['zul.box.Vlayout','zk_comp_19',{id:'pics1',visible:false,$onClick:true},[]]]],
['zul.box.Hlayout','zk_comp_20',{sclass:'nav-user pull-right',prolog:'                             \n                            ',spacing:'0'},[
['zul.wgt.A','zk_comp_21',{id:'anoti',sclass:'btn btn-lg btn-primary',popup:'notipp, position=after_end, type=toggle',iconSclass:'z-icon-user'},[
['zul.wgt.Label','zk_comp_22',{id:'labelNotifTicket'},[]],
['zul.wgt.Label','zk_comp_23',{id:'notif_user',sclass:'badge badge-important'},[]]]],
['zul.wgt.A','zk_comp_24',{id:'amsg',sclass:'btn btn-lg btn-primary',popup:'msgpp, position=after_end, type=toggle',iconSclass:'z-icon-globe'},[
['zul.wgt.Label','zk_comp_25',{id:'labelNotifAssignedTo'},[]],
['zul.wgt.Label','zk_comp_26',{id:'notif_ass_to',sclass:'badge badge-important'},[]]]],
['zul.wgt.A','zk_comp_27',{id:'assGroup',sclass:'btn btn-lg btn-primary',popup:'assGroupPopup, position=after_end, type=toggle',iconSclass:'z-icon-list-alt'},[
['zul.wgt.Label','zk_comp_28',{id:'labelNotifAssGroup'},[]],
['zul.wgt.Label','zk_comp_29',{id:'notif_assGroup',sclass:'badge badge-important'},[]]]],
['zul.wgt.A','zk_comp_30',{id:'atask',sclass:'btn btn-lg btn-primary',popup:'taskpp, position=after_end, type=toggle',iconSclass:'z-icon-home',href:'index.zul'},[
['zul.wgt.Label','zk_comp_31',{id:'notif_userLogin',value:' '},[]],
['zul.wgt.Label','zk_comp_32',{sclass:'badge badge-grey'},[]]]],
['zul.wgt.Div','zk_comp_33',{id:'divUser',sclass:'user'},[
['zul.wgt.Image','zk_comp_34',{id:'userProfileImage',prolog:'\n                                    \n                                    ',src:'assets/avatars/avatar1.png'},[]]]],
['zul.menu.Menupopup','zk_comp_35',{id:'notipp3',visible:false,$$onOpen:false,width:'200px'},[
['zul.menu.Menuitem','zk_comp_36',{id:'itemEp',$$onCheck:false,width:'100%',label:'Switch Role ',iconSclass:'z-icon-refresh'},[]],
['zul.menu.Menuseparator','zk_comp_37',{id:'menuSpCheckin',visible:false},[]],
['zul.menu.Menuitem','zk_comp_38',{id:'itemCheckin',visible:false,width:'100%',label:'Checkin',iconSclass:'z-icon-check'},[]],
['zul.menu.Menuseparator','zk_comp_39',{id:'menuSpCheckout',visible:false},[]],
['zul.menu.Menuitem','zk_comp_40',{id:'itemCheckout',visible:false,width:'100%',label:'Checkout',iconSclass:'z-icon-share'},[]],
['zul.menu.Menuseparator','zk_comp_41',{id:'menuSpDelegate'},[]],
['zul.menu.Menuitem','zk_comp_42',{id:'itemDelegate',width:'100%',label:'Delegate',iconSclass:'z-icon-group'},[]],
['zul.menu.Menuseparator','zk_comp_43',{id:'menuSpSwitch'},[]],
['zul.menu.Menuitem','zk_comp_44',{id:'itemProfile',width:'100%',label:'Profile',iconSclass:'z-icon-user'},[]],
['zul.menu.Menuseparator','zk_comp_45',{},[]],
['zul.menu.Menuitem','zk_comp_46',{id:'itemLogout',width:'100%',label:'Logout',iconSclass:'z-icon-sign-out'},[]]]]]],
['zul.wgt.Popup','zk_comp_47',{id:'notipp',visible:false,$$onOpen:false,width:'260px',sclass:'menu menu-pink',prolog:'\n                            \n      \n                            '},[
['zul.wgt.A','zk_comp_48',{sclass:'header',prolog:'\n                                ',label:'Notifications ',iconSclass:'z-icon-exclamation-triangle'},[]],
['zul.wgt.Groupbox','zk_comp_49',{$$onOpen:false,prolog:'\n                                ',closable:false},[
['zul.box.Vlayout','zk_comp_50',{height:'240px',style:'overflow:auto;'},[
['zul.grid.Grid','zk_comp_51',{$$onDataLoading:true,$$onInnerWidth:false,$$onRender:true,$$onScrollPos:false,$$onPageSize:true,sclass:'custom-grid',_topPad:0,emptyMessage:null,_totalSize:0,_offset:0},[
['zul.grid.Columns','zk_comp_52',{$$onColSize:false},[
['zul.grid.Column','zk_comp_53',{$onSort:true,height:'40px',style:'font-size:12pt; font-weight:bold;'},[]]]],
['zul.grid.Rows','zk_comp_54',{id:'rowsDinamicCreate',_offset:0,visibleItemCount:0},[]]]]]]],'3d']]],
['zul.wgt.Popup','zk_comp_55',{id:'msgpp',visible:false,width:'260px',sclass:'menu',prolog:'\n\n                            '},[
['zul.wgt.A','zk_comp_56',{sclass:'header',prolog:'\n                                ',label:'Notifications',iconSclass:'z-icon-exclamation-triangle'},[]],
['zul.wgt.Groupbox','zk_comp_57',{prolog:'\n                                \n                                ',closable:false},[
['zul.box.Vlayout','zk_comp_58',{height:'240px',style:'overflow:auto;'},[
['zul.grid.Grid','zk_comp_59',{sclass:'custom-grid',_topPad:0,emptyMessage:null,_totalSize:0,_offset:0},[
['zul.grid.Columns','zk_comp_60',{},[
['zul.grid.Column','zk_comp_61',{$onSort:true,height:'40px',style:'font-size:12pt; font-weight:bold;'},[]]]],
['zul.grid.Rows','zk_comp_62',{id:'rowsDinamic',_offset:0,visibleItemCount:0},[]]]]]]],'3d']]],
['zul.wgt.Popup','zk_comp_63',{id:'surveypp',visible:false,width:'260px',sclass:'menu',prolog:'\n                            \n                            '},[
['zul.wgt.A','zk_comp_64',{sclass:'header',prolog:'\n                                ',label:'Notifications',iconSclass:'z-icon-exclamation-triangle'},[]],
['zul.wgt.Groupbox','zk_comp_65',{prolog:'\n                                \n                                ',closable:false},[
['zul.box.Vlayout','zk_comp_66',{height:'240px',style:'overflow:auto;'},[
['zul.grid.Grid','zk_comp_67',{sclass:'custom-grid',_topPad:0,emptyMessage:null,_totalSize:0,_offset:0},[
['zul.grid.Columns','zk_comp_68',{},[
['zul.grid.Column','zk_comp_69',{$onSort:true,height:'40px',style:'font-size:12pt; font-weight:bold;'},[]]]],
['zul.grid.Rows','zk_comp_70',{id:'rowsDinamicSurvey',_offset:0,visibleItemCount:0},[]]]]]]],'3d']]],
['zul.wgt.Popup','zk_comp_71',{id:'assGroupPopup',visible:false,width:'260px',sclass:'menu',prolog:'\n                            '},[
['zul.wgt.A','zk_comp_72',{sclass:'header',prolog:'\n                                ',label:'Notifications',iconSclass:'z-icon-exclamation-triangle'},[]],
['zul.wgt.Groupbox','zk_comp_73',{prolog:'\n                                \n                                ',closable:false},[
['zul.box.Vlayout','zk_comp_74',{height:'240px',style:'overflow:auto;'},[
['zul.grid.Grid','zk_comp_75',{sclass:'custom-grid',_topPad:0,emptyMessage:null,_totalSize:0,_offset:0},[
['zul.grid.Columns','zk_comp_76',{},[
['zul.grid.Column','zk_comp_77',{$onSort:true,height:'40px',style:'font-size:12pt; font-weight:bold;'},[]]]],
['zul.grid.Rows','zk_comp_78',{id:'rowsDinamicAssGroup',_offset:0,visibleItemCount:0},[]]]]]]],'3d']]]]]]],
['zul.wgt.Separator','zk_comp_79',{height:'15px',orient:'horizontal'},[]],
['zul.box.Hlayout','zk_comp_80',{id:'main',spacing:'0'},[
['zul.box.Box','zk_comp_81',{},[
['zul.box.Box','zk_comp_82',{},[
['zul.wgt.Button','zk_comp_83',{id:'buttonTutup',visible:false,$onClick:true,width:'240px',height:'30px',sclass:'btn-primary2',iconSclass:'z-icon-angle-double-left',autodisable:'self'},[],'trendy']],'horizontal'],
['zul.box.Box','zk_comp_84',{id:'hboxMenuOption',visible:false},[
['zul.inp.Textbox','zk_comp_85',{id:'menuName',$$onError:false,$$onChange:false,$onChange:true,$onOK:true,width:'150px'},[]],
['zul.wgt.Button','zk_comp_86',{id:'searchMenu',$onClick:true,sclass:'btn-success',iconSclass:'z-icon-search',autodisable:'self'},[],'trendy'],
['zul.wgt.Button','zk_comp_87',{id:'clearMenu',$onClick:true,sclass:'btn-warning',iconSclass:'z-icon-refresh',autodisable:'self'},[],'trendy']],'horizontal'],
['zul.box.Vlayout','zk_comp_88',{id:'vlayoutTree',sclass:'sidebar-collapse',style:'height:300px; border:0px solid black;overflow:auto;background-color:#333333;'},[
['zul.sel.Tree','zk_comp_89',{id:'tree',$$onAnchorPos:false,$$onSelect:false,$$onInnerWidth:false,$$onRender:true,$$onScrollPos:false,$$onPageSize:true,width:'220px',sclass:'nav-list'},[
['zul.sel.Treecols','zk_comp_90',{$$onColSize:false,sizable:true},[
['zul.sel.Treecol','zk_comp_91',{id:'treeCol',$onSort:true},[]]]]]]]]],'vertical'],
['zul.box.Vlayout','zk_comp_92',{id:'vlayout1',width:'100%',height:'100%',style:'overflow:auto;',spacing:'0'},[
['zul.wgt.Div','zk_comp_93',{width:'100%',style:'background-color:#006298;height:30px;'},[
['zul.wgt.Div','zk_comp_94',{sclass:'breadcrumb',prolog:'\n                                '},[
['zul.wgt.Button','zk_comp_95',{id:'buttonBuka',visible:false,$onClick:true,width:'30px',height:'30px',sclass:'btn-primary2',prolog:'\n                                    ',iconSclass:'z-icon-angle-double-right',autodisable:'self'},[],'trendy'],
['zul.wgt.Label','zk_comp_96',{id:'labelBreadcrumbs',visible:false,style:'color:white',prolog:'\n                                    \n                                    '},[]]]]]],
['zul.wgt.Div','zk_comp_97',{id:'divCenter',width:'100%',height:'100%'},[
['zul.box.Vlayout','zk_comp_98',{id:'vlayoutCenter',width:'100%',height:'100%',style:'border:0px solid black;overflow:auto;',prolog:'\n                                '},[
['zul.wgt.Include','zk_comp_99',{id:'includeCenter',width:'100%',height:'100%',style:'overflow:auto;'},[]]]]]]]]]]]]]],
['zul.layout.South','zk_comp_100',{$$onOpen:false,$$onSize:false,style:'border:0px;'},[
['zul.wgt.Div','zk_comp_101',{style:'border:0px;'},[
['zul.box.Hlayout','zk_comp_102',{style:'border:0px;',prolog:'\n\n                   \n                    \n                    '},[
['zul.wgt.Toolbar','zk_comp_103',{id:'tbFooter',width:'1800px',height:'30px',style:'border:0px;',align:'end'},[
['zul.box.Box','zk_comp_104',{prolog:'\n                            '},[
['zul.wgt.A','zk_comp_105',{id:'aChat',style:'color: #ffffff;'},[
['zul.box.Box','zk_comp_106',{},[
['zul.wgt.Div','zk_comp_107',{id:'divCounterChat',visible:false,sclass:'divProfileIconMenu',style:'padding-left: 30px; position:relative; margin-left:6%; margin-top:-6%; text-align:center;'},[
['zul.wgt.Div','zk_comp_108',{prolog:'\n                                            '},[
['zul.box.Hlayout','zk_comp_109',{width:'17px',height:'17px',style:'border-radius: 100%; background-color: red',prolog:'\n                                                '},[
['zul.wgt.Div','zk_comp_110',{style:'position:relative; margin-top:3px;'},[
['zul.wgt.Label','zk_comp_111',{id:'lblChatCount',style:'color: #ffffff; font-weight: bold;',prolog:'\n                                                        ',value:'99+'},[]]]]]]]]]],
['zul.wgt.Div','zk_comp_112',{sclass:'containerUserMenu',style:'position:relative; margin-top:17%;'},[
['zul.box.Box','zk_comp_113',{width:'10px',prolog:'\n                                            '},[
['zul.wgt.Span','zk_comp_114',{sclass:'z-icon-comment',style:'font-size: 11pt'},[]]],'horizontal']]]],'horizontal']]],
['zul.wgt.Button','zk_comp_115',{id:'buttonGroupChat',iconSclass:'z-icon-group',autodisable:'self'},[],'trendy']],'horizontal']]],
['zul.utl.Script','zk_comp_116',{},[]]]]]]]]]]]]]],9,
['clientInfo','["z_6f40"]',
'redirect','["logout.zul",""]']);

        function generateCode(val){ 
        var qrcode = new QRCode("qrcode");
        qrcode.makeCode(val);
        }
        
        function generateBarcode(val){
        JsBarcode("#barcode", val);
        }
    

        function logIn(){   
        console.log("Log In");
        try {
        Android.shareLink("login");
        }
        catch(err) {
        window.location = "sign_in.zul";
        } 
        
        }
                                    
        function mapservice(){  
        console.log("Maps Service");
        try {
        Android.shareLink("mapservice");
        }
        catch(err) {
                                   
        } 
        }
                                    
        function stopservice(){   
        console.log("-- Stop Service --");
        try {
        Android.shareLink("stopservice");
        }
        catch(err) {
                                   
        } 
        }                                              
        var map;
        var geocoder = new google.maps.Geocoder;
        var marker; 
        var autocomplete;
        var longitude;
        var latitude;
        
        function testJS(window, long, lat) {
        if(window != null){
        zAu.send(new zk.Event(zk.Widget.$('$window'), 'onSend', long+";"+lat+";"+window, {toServer:true}));
        }
        }
        
        function initialize(window, long, lat) {    
        console.log("initialize");
        longitude = long;
        latitude = lat;
        console.log("latitude " +latitude);
        console.log("longitude " +longitude);
        
        if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);         
        } else {
        alert("Geolocation is not supported by this browser.");
        }            
        } 

        function showPosition(position){
        console.log("Show Position");
        var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);                       
        geocoder.geocode({'location': latlng}, function(results, status) {
        if (status === 'OK') {
        if (results[1]) {
        zAu.send(new zk.Event(zk.Widget.$('$window'), 'onSend', position.coords.latitude+";"+position.coords.longitude+";"+results[0].formatted_address, {toServer:true}));
        var mapOptions = {
        zoom: 17,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(zk.Widget.$(jq('$maps')).$n(), mapOptions);
                    
        var inputs = document.getElementById('input_auto');                
        inputs.value = results[0].formatted_address;
        autocomplete = new google.maps.places.Autocomplete(inputs);
        autocomplete.bindTo('bounds', map);
         
        autocomplete.addListener('place_changed', function() {
        infowindow.close();
        marker.setVisible(false);
        var place = autocomplete.getPlace();
        if (!place.geometry) {
        // User entered the name of a Place that was not suggested and
        // pressed the Enter key, or the Place Details request failed.
        window.alert("No details available for input: '" + place.name + "'");
        return;
        }
        // If the place has a geometry, then present it on a map.
        if (place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport);
        } else {
        map.setCenter(place.geometry.location);
        map.setZoom(17);  // Why 17? Because it looks good.
        }

        marker.setPosition(place.geometry.location);
        marker.setVisible(true);
                      
        zAu.send(new zk.Event(zk.Widget.$('$window'), 'onSend', place.geometry.location.lat()+";"+place.geometry.location.lng()+";"+place.formatted_address, {toServer:true}));
        infowindow.setContent(place.formatted_address);          
        infowindow.open(map, marker);
        });
        
        var infowindow = new google.maps.InfoWindow({
        content: results[0].formatted_address
        });
        
        marker = new google.maps.Marker({
        position: latlng,
        draggable:true,
        map: map
        });
        
        infowindow.open(map, marker);                            
                            
        marker.addListener('click', function() {
        infowindow.open(map, marker);
        });
                    
        marker.addListener('dragend', function(event) {   
        showMapDrag(event.latLng);
        });       
        marker.setMap(map);
        } else {
        window.alert('No results found');
        }
        }else {
        window.alert('Geocoder failed due to: ' + status);
        }
        });         
        }
        
        
        
        function showMapDrag(latlng){
        geocoder.geocode({'location': latlng}, function(results, status) {
        if (status === 'OK') {                
        if (results[1]) {
        zAu.send(new zk.Event(zk.Widget.$('$window'), 'onSend', latlng.lat()+";"+latlng.lng()+";"+results[0].formatted_address, {toServer:true}));
        var mapOptions = {
        zoom: 17,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        
        map = new google.maps.Map(zk.Widget.$(jq('$maps')).$n(), mapOptions);

        var infowindow = new google.maps.InfoWindow({
        content: results[0].formatted_address
        });
                          
        var inputs = document.getElementById('input_auto');                
        inputs.value = results[0].formatted_address;
        autocomplete = new google.maps.places.Autocomplete(inputs);
        autocomplete.bindTo('bounds', map);
                        
        autocomplete.addListener('place_changed', function() {
        infowindow.close();
        marker.setVisible(false);
        var place = autocomplete.getPlace();
        if (!place.geometry) {
        // User entered the name of a Place that was not suggested and
        // pressed the Enter key, or the Place Details request failed.
        window.alert("No details available for input: '" + place.name + "'");
        return;
        }

        // If the place has a geometry, then present it on a map.
        if (place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport);
        } else {
        map.setCenter(place.geometry.location);
        map.setZoom(17);  // Why 17? Because it looks good.
        }

        marker.setPosition(place.geometry.location);
        marker.setVisible(true);
      
        zAu.send(new zk.Event(zk.Widget.$('$window'), 'onSend', place.geometry.location.lat()+";"+place.geometry.location.lng()+";"+place.formatted_address, {toServer:true}));
                            
        infowindow.setContent(place.formatted_address);          
        infowindow.open(map, marker);
        });

        marker = new google.maps.Marker({
        position: latlng,
        draggable:true,
        map: map
        });

        infowindow.open(map, marker);      
                          
        marker.addListener('click', function() {
        infowindow.open(map, marker);
        });

        marker.addListener('dragend', function(event) {                       
        showMapDrag(event.latLng);
        });                       
                         
        marker.setMap(map);
        } else {
        window.alert('No results found');
        }
        }else {
        window.alert('Geocoder failed due to: ' + status);
        }
        });           
        }
        //google.maps.event.addDomListener(window, 'load', initialize);
    

                            //window.botpressWebChat.init({host: 'http://localhost:3000',botId: 'flight-booking-bot'});
                        

</script>
<noscript>
<div class="noscript"><p>Sorry, JavaScript must be enabled.<br/>Change your browser options, then <a href="">try again</a>.</p></div>
</noscript>

</body>
</html>
